

/**array of the words in the game
* made them an array because i had no time to use backend
** */
    let words = ["WORDS",
        "BEING",
        "BELOW",
        "BENCH",
        "BILLY",
        "BIRTH",
        "BLACK",
        "BLAME",
        "BLIND",
        "BLOCK",
        "BLOOD",
        "BOARD",
        "BOOST",
        "BOOTH",
        "BOUND",
        "BRAIN",
        "BRAND",
        "BREAD",
        "BREAK",
        "BREED",
        "BRIEF",
        "BRING",
        "BROAD",
        "BROKE",
        "BROWN",
        "BUILD",
        "BUILT",
        "BUYER",
        "CABLE",
        "CALIF",
        "CARRY",
        "CATCH",
        "CAUSE",
        "CHAIN",
        "CHAIR",
        "CHART",
        "CHASE",
        "CHEAP",
        "CHECK",
        "CHEST",
        "CHIEF",
        "CHILD",
        "CHINA",
        "CHOSE",
        "CIVIL",
        "CLAIM",
        "CLASS",
        "CLEAN",
        "CLEAR",
        "CLICK",
        "CLOCK",
        "CLOSE",
        "COACH",
        "COAST",
        "COULD",
        "COUNT",
        "COURT",
        "COVER",
        "CRAFT",
        "CRASH",
        "CREAM",
        "CRIME",
        "CROSS",
        "CROWD",
        "CROWN",
        "CURVE",
        "CYCLE",
        "DAILY",
        "DANCE",
        "DATED",
        "DEALT",
        "DEATH",
        "DEBUT",
        "DELAY",
        "DEPTH",
        "DOING",
        "DOUBT",
        "DOZEN",
        "DRAFT",
        "DRAMA",
        "DRAWN",
        "DREAM",
        "DRESS",
        "DRILL",
        "DRINK",
        "DRIVE",
        "DROVE",
        "DYING",
        "EAGER",
        "EARLY",
        "EARTH",
        "EIGHT",
        "ELITE",
        "EMPTY",
        "ENEMY",
        "ENJOY",
        "ENTER",
        "ENTRY",
        "EQUAL",
        "ERROR",
        "EVENT",
        "EVERY",
        "EXACT",
        "EXIST",
        "EXTRA",
        "FAITH",
        "FAULT",
        "FIBER",
        "FIELD",
        "FIFTH",
        "FIFTY",
        "FIGHT",
        "FINAL",
        "FIRST",
        "FIXED",
        "FLASH",
        "FLEET",
        "FLOOR",
        "FLUID",
        "FOCUS",
        "FORCE",
        "FORTH",
        "FORTY",
        "FORUM",
        "FOUND",
        "FRAME",
        "FRANK",
        "FRAUD",
        "FRESH",
        "FRONT",
        "FRUIT",
        "FULLY",
        "FUNNY",
        "GIANT",
        "GIVEN",
        "GLASS",
        "GLOBE",
        "GOING",
        "GRACE",
        "GRADE",
        "GRAND",
        "GRANT",
        "GRASS",
        "GREAT",
        "GREEN",
        "GROSS",
        "GROUP",
        "GROWN",
        "GUARD",
        "GUESS",
        "GUEST",
        "GUIDE",
        "HAPPY",
        "HARRY",
        "HEART",
        "HEAVY",
        "HENCE",
        "HENRY",
        "HORSE",
        "HOTEL",
        "HOUSE",
        "HUMAN",
        "IDEAL",
        "IMAGE",
        "INDEX",
        "INNER",
        "INPUT",
        "ISSUE",
        "JAPAN",
        "JIMMY",
        "JOINT",
        "JONES",
        "JUDGE",
        "KNOWN",
        "LABEL",
        "LARGE",
        "LASER",
        "LATER",
        "LAUGH",
        "LAYER",
        "LEARN",
        "LEASE",
        "LEAST",
        "LEAVE",
        "LEGAL",
        "LEVEL",
        "LEWIS",
        "LIGHT",
        "LIMIT",
        "LINKS",
        "LIVES",
        "LOCAL",
        "LOGIC",
        "LOOSE",
        "LOWER",
        "LUCKY",
        "LUNCH",
        "LYING",
        "MAGIC",
        "MAJOR",
        "MAKER",
        "MARCH",
        "MARIA",
        "MATCH",
        "MAYBE",
        "MAYOR",
        "MEANT",
        "MEDIA",
        "METAL",
        "MIGHT",
        "MINOR",
        "MINUS",
        "MIXED",
        "MODEL",
        "MONEY",
        "MONTH",
        "MORAL",
        "MOTOR",
        "MOUNT",
        "MOUSE",
        "MOUTH",
        "MOVIE",
        "MUSIC",
        "NEEDS",
        "NEVER",
        "NEWLY",
        "NIGHT",
        "NOISE",
        "NORTH",
        "NOTED",
        "NOVEL",
        "NURSE",
        "OCCUR",
        "OCEAN",
        "OFFER",
        "OFTEN",
        "ORDER",
        "OTHER",
        "OUGHT",
        "PAINT",
        "PANEL",
        "PAPER",
        "PARTY",
        "PEACE",
        "PETER",
        "PHASE",
        "PHONE",
        "PHOTO",
        "PIECE",
        "PILOT",
        "PITCH",
        "PLACE",
        "PLAIN",
        "PLANE",
        "PLANT",
        "PLATE",
        "POINT",
        "POUND",
        "POWER",
        "PRESS",
        "PRICE",
        "PRIDE",
        "PRIME",
        "PRINT",
        "PRIOR",
        "PRIZE",
        "PROOF",
        "PROUD",
        "PROVE",
        "QUEEN",
        "QUICK",
        "QUIET",
        "QUITE",
        "RADIO",
        "RAISE",
        "RANGE",
        "RAPID",
        "RATIO",
        "REACH",
        "READY",
        "REFER",
        "RIGHT",
        "RIVAL",
        "RIVER",
        "ROBIN",
        "ROGER",
        "ROMAN",
        "ROUGH",
        "ROUND",
        "ROUTE",
        "ROYAL",
        "RURAL",
        "SCALE",
        "SCENE",
        "SCOPE",
        "SCORE",
        "SENSE",
        "SERVE",
        "SEVEN",
        "SHALL",
        "SHAPE",
        "SHARE",
        "SHARP",
        "SHEET",
        "SHELF",
        "SHELL",
        "SHIFT",
        "SHIRT",
        "SHOCK",
        "SHOOT",
        "SHORT",
        "SHOWN",
        "SIGHT",
        "SINCE",
        "SIXTH",
        "SIXTY",
        "SIZED",
        "SKILL",
        "SLEEP",
        "SLIDE",
        "SMALL",
        "SMART",
        "SMILE",
        "SMITH",
        "SMOKE",
        "SOLID",
        "SOLVE",
        "SORRY",
        "SOUND",
        "SOUTH",
        "SPACE",
        "SPARE",
        "SPEAK",
        "SPEED",
        "SPEND",
        "SPENT",
        "SPLIT",
        "SPOKE",
        "SPORT",
        "STAFF",
        "STAGE",
        "STAKE",
        "STAND",
        "START",
        "STATE",
        "STEAM",
        "STEEL",
        "STICK",
        "STILL",
        "STOCK",
        "STONE",
        "STOOD",
        "STORE",
        "STORM",
        "STORY",
        "STRIP",
        "STUCK",
        "STUDY",
        "STUFF",
        "STYLE",
        "SUGAR",
        "SUITE",
        "SUPER",
        "SWEET",
        "TABLE",
        "TAKEN",
        "TASTE",
        "TAXES",
        "TEACH",
        "TEETH",
        "TERRY",
        "TEXAS",
        "THANK",
        "THEFT",
        "THEIR",
        "THEME",
        "THERE",
        "THESE",
        "THICK",
        "THING",
        "THINK",
        "THIRD",
        "THOSE",
        "THREE",
        "THREW",
        "THROW",
        "TIGHT",
        "TIMES",
        "TIRED",
        "TITLE",
        "TODAY",
        "TOPIC",
        "TOTAL",
        "TOUCH",
        "TOUGH",
        "TOWER",
        "TRACK",
        "TRADE",
        "TRAIN",
        "TREAT",
        "TREND",
        "TRIAL",
        "TRIED",
        "TRIES",
        "TRUCK",
        "TRULY",
        "TRUST",
        "TRUTH",
        "TWICE",
        "UNDER",
        "UNDUE",
        "UNION",
        "UNITY",
        "UNTIL",
        "UPPER",
        "UPSET",
        "URBAN",
        "USAGE",
        "USUAL",
        "VALID",
        "VALUE",
        "VIDEO",
        "VIRUS",
        "VISIT",
        "VITAL",
        "VOICE",
        "WASTE",
        "WATCH",
        "WATER",
        "WHEEL",
        "WHERE",
        "WHICH",
        "WHILE",
        "WHITE",
        "WHOLE",
        "WHOSE",
        "WOMAN",
        "WOMEN",
        "WORLD",
        "WORRY",
        "WORSE",
        "WORST",
        "WORTH",
        "WOULD",
        "WOUND",
        "WRITE",
        "WRONG",
        "WROTE",
        "YIELD",
        "YOUNG"
    ]


    let height = 6,         // number of attempts
            width = 5,      // word length
            row = 0,        // current attempt
            col = 0,        // current letter for that attempt
            gameOver = false;   // flag of the game

            let wordIndex = Math.floor(Math.random() * (449 + 1));  // generating random number
            console.log(wordIndex);
            word = words[wordIndex];                                    // select word based on the number
            console.log(word);

    /** when the window loads do initialize the game **/
    window.onload = _ => {
        initialize();
    }


    /**creates the game board and activate the listeners **/
    function initialize(){
        createGameBoard();
        Listeners();
    }

    function createGameBoard(){
        /**creates html spans which is considered the game cards which we fill the letters**/
        for (let i = 0; i < height; i++){
            for (let j = 0; j < width; j++){
                let flipCard = document.createElement("span");       // create spans
                flipCard.classList.add('card');                               // to add styling to the card
                flipCard.id = i.toString() + "-" + j.toString();    // assign id to the span
                flipCard.innerText = "";                            // make the span empty
                document.getElementById("board").appendChild(flipCard); // add the span to the borad
            }
        }
    }

    /**function that monitors all the things
     *  1- key pressed
     *  2- buttons clicked
     *  and then take actions based on these events
     * **/

    function Listeners(){
        document.addEventListener("keyup", (e)=>{

            if (gameOver)
                return;

            /**limit the choice to the A-Z keys only (to prevent the pressing of unwanted keys)**/
            if ("KeyA" <= e.code && "KeyZ" >= e.code){
                if (col < width){
                    let curTitle = document.getElementById(row.toString() + "-" + col.toString());
                    if (curTitle.innerText === ""){             // to prevent overriding of letters
                        curTitle.innerText = e.code[3];         // assign the pressed key letter to the the card
                        curTitle.classList.add('card-filled');  // add styling of the filled card
                        col++;
                    }
                }
            }
            else if (e.code === "Backspace"){           // when backspace is pressed
                if (0 < col && col <= width)
                    col--;

                let curTitle = document.getElementById(row.toString() + "-" + col.toString());
                curTitle.classList.remove('card-filled');       // remove filled card styling
                curTitle.innerText = "";                               // clear the letter
            }
            else if (e.code === "Enter"){                   // when enter is pressed
                submitAnswer();
            }

            if (!gameOver && row === height){           // if the row count = height it means the game is over
                gameOver = true;
                document.getElementById("answer").innerText = word;         // show the word to the user
            }
        })
        document.getElementById('enter').onclick = _ =>{            // when clicking the enter btn
            submitAnswer();
        }
        document.getElementById('replay').onclick = _ =>{           // when clicking the play again btn
            restGameBoard();
        }
    }

    /**
     * function that processes & validates the submitted letters
     **/
    function submitAnswer(){
        let wordForCheck = [];          // get the word in array
        let noSpace = true;             // flag to see if the user left some spans without filling
        for (let i = 0; i < width; i++) {
            let curTitle = document.getElementById(row.toString() + '-' + i.toString())
            let letter = curTitle.innerText;
            wordForCheck.push(letter);          // push letters of the input
            if (letter === "")                  // if it has spaces
                noSpace= false;
        }
        if (noSpace){
            if (wordValidator(wordForCheck.join(""))){      // check if the word is included in the array of words
                updateBoard();
                row++;
                col=0;
            }
            else {
                document.getElementById('answer').innerText = "Please Enter a Valid Word";
            }
        }

        else
            document.getElementById('answer').innerText = "Please Don't Leave Spaces";
    }

    /**
     * function that updates the board after submitting letters
     **/
    function updateBoard(){
        let correct = 0;                    // number of correct letters in one attempt
        for (let i = 0; i < width; i++){
            let curTitle = document.getElementById(row.toString() + '-' + i.toString())
            let letter = curTitle.innerText;        // get the letter at certain card
            // correct position
            if (word[i] === letter){
                curTitle.classList.add('correct');
                correct++;
            }

            // in the word?
            else if (word.includes(letter)){
                if (word[i] !== letter)
                    curTitle.classList.add('present');
            }
            // not in the word
            else
                curTitle.classList.add('absent');
        }

        if (correct === width) { // if the number of correct is equal width it means its the correct word
            gameOver = true;
            document.getElementById("answer").innerText = "Congrats Lad";
        }
    }

    /**
     *  function that resets the game board to replay again
     * */
    function restGameBoard(){
        /**for each span get there and clean the letters form it**/
        for (let i = 0; i < height; i++){
            for (let j = 0; j < width; j++){
                let curTitle = document.getElementById(i.toString() + "-" + j.toString());
                curTitle.classList.remove('card-filled');
                curTitle.classList.remove('correct');
                curTitle.classList.remove('present');
                curTitle.classList.remove('absent');
                curTitle.innerText = "";
            }
        }
        /**reset all parameter to start a new game**/
        col = 0;
        row = 0;
        gameOver= false;
        wordIndex = Math.floor(Math.random() * (449 + 1));      // generates new index
        word = words[wordIndex];                                   // pickup a new word
        console.log(word);
    }

    /**
     * function that checks for the input word from the user in the array of the words
     * */
    function wordValidator(checkedWord){
        let found = false;
        for (i = 0; i < words.length; i++){
            if (checkedWord === words[i]){
                found = true;
            }
        }
        return found;
    }


